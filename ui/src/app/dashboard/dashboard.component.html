<div class="dashboard-container">
  <header>
    <div class="logo">
      <img src="assets/gryphon-ai-logo.jpg" alt="Gryphen AI Logo" style="height:75px; vertical-align:middle;" />
    </div>
    <div class="user-info">
      <span class="notification">!</span>
      <span class="user">User</span>
    </div>
  </header>

  <div class="main-content">
    <app-sidebar></app-sidebar>
    <main class="content-area">
      <h1>Dashboard</h1>
      <button class="action-btn refresh-btn" (click)="refresh()" [disabled]="loading">
        &#x21bb; Refresh
      </button>
      <div *ngIf="loading" class="loading-indicator">Loading...</div>

      <div class="grid-container">
        <div class="card">
          <h3>Total Repositories</h3>
          <div class="metric">{{ totalRepositories }}</div>
        </div>
        <div class="card">
          <h3>Average Code Coverage</h3>
          <div class="metric">{{ averageCoverage.toFixed(2) }}%</div>
        </div>
        <div class="card">
          <h3>Average Quality Score</h3>
          <div class="metric">{{ averageQualityScore.toFixed(2) }}</div>
        </div>
      </div>

      <div class="repo-summary">
        <h3>Repository Summary</h3>
        <table>
          <thead>
            <tr>
              <th>Logical Name</th>
              <th>Ingestion Status</th>
              <th>Test Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let repo of repositories">
              <td>{{ repo.logical_name }}</td>
              <td><span class="status" [ngClass]="repo.status">{{ repo.status }}</span></td>
              <td><span class="status" [ngClass]="repo.test_status">{{ repo.test_status }}</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>