<div class="interactive-knowledge-base-container">
  <h1>Interactive Knowledge Base</h1>

  <mat-card class="card input-section">
    <mat-card-content>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Ask a question about the codebase...</mat-label>
        <textarea matInput [(ngModel)]="question" rows="3"></textarea>
      </mat-form-field>
    </mat-card-content>
    <mat-card-actions class="actions-right">
      <button mat-raised-button color="primary" (click)="sendQuestion()" [disabled]="loading">
        {{ loading ? 'Sending...' : 'Send' }}
      </button>
    </mat-card-actions>
  </mat-card>

  <section class="qa-section" *ngIf="loading || response">
    <div *ngIf="loading" class="loading-indicator">
      Fetching answer...
    </div>

    <div *ngIf="response" class="ai-response">
      <mat-card class="card answer-section">
        <mat-card-header>
          <mat-card-title>Answer</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="markdown-content" [innerHTML]="answerHtml"></div>
        </mat-card-content>
      </mat-card>

      <mat-card class="card context-section">
        <mat-card-header>
          <mat-card-title>Code Context</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="markdown-content" [innerHTML]="codeContextHtml"></div>
        </mat-card-content>
      </mat-card>

      <mat-card class="card context-section">
        <mat-card-header>
          <mat-card-title>Documentation Context</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="markdown-content" [innerHTML]="docContextHtml"></div>
        </mat-card-content>
      </mat-card>
    </div>
  </section>
</div>